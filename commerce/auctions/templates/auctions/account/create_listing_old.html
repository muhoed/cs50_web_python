{% extends "auctions/account/profile_layout.html" %}

{% block content %}
				
				<div class="container">
					<h3 class="">New listing.</h3>
					<p>Please fill the form below to list your product for sale on Auction$.</p> 
					<div class="container mt-5 mb-2">
						{{ form.non_field_errors }}
						<form action="{% url 'auctions:create_listing' user.id %}" method="post">
							{% csrf_token %}
							<table class="create-listing-form mb-2 border border-primary border-top-0 border-right-0 border-left-0">
								<tr><td colspan="2">{{ form.product.errors }}</td></tr>
								<tr class="mb-1">
									<td>
										Create new product
										<button class="btn btn-secondary" id="create-product">
											Create
										</button>
									</td>
									<td class="products-list">or select one from the list below</td>
								</tr>
								<!-- part of the form to create new product -->
								<tr class="new-product"><td colspan="3">{{ product_form.non_field_errors }}</td></tr>
								<tr class="new-product"><td colspan="3">{{ product_form.name.errors }}</td></tr>
								<tr class="new-product">
									<th>{{ product_form.name.label_tag }}</th>
									<td colspan="2">{{ product_form.name }}</td>
								</tr>
								<tr class="new-product"><td colspan="3">{{ product_form.categories.errors }}</td></tr>
								<tr class="new-product mb-2">
									<th>{{ product_form.categories.label_tag }}</th>
									<td colspan="2">{{ product_form.categories }}</td>
								</tr>
								<tr class="new-product"><td colspan="3">Add links to up to three images of the product</td></tr>
								<tr class="new-product"><td colspan="3">{{ image_formset.non_form_errors }}</td></tr>
								{{ image_formset.management_form }}
								<!-- for iform in image_formset -->
									<tr class="new-product">
										<td>{{ image_formset.0.non_field_errors }}</td>
										<td>{{ image_formset.1.non_field_errors }}</td>
										<td>{{ image_formset.2.non_field_errors }}</td>
									</tr>
									<tr class="new-product">
										<td>{{ image_formset.0.image_url.errors }}</td>
										<td>{{ image_formset.1.image_url.errors }}</td>
										<td>{{ image_formset.2.image_url.errors }}</td>
									</tr>
									<tr class="new-product">
										<td>{{ image_formset.0.image_url.label_tag }}</td>
										<td>{{ image_formset.1.image_url.label_tag }}</td>
										<td>{{ image_formset.2.image_url.label_tag }}</td>
									</tr>
									<tr class="new-product">
										<td>{{ image_formset.0.image_url }}</td>
										<td>{{ image_formset.1.image_url }}</td>
										<td>{{ image_formset.2.image_url }}</td>
									</tr>
								<!-- endfor -->
								<tr class="new-product mt-2"><td colspan="2">{{ product_form.description.errors }}</td></tr>
								<tr class="new-product mb-2">
									<th>{{ product_form.description.label_tag }}</th>
									<td>{{ product_form.description }}</td>
								</tr>
								<!-- choose existing product if do not want to create new one -->
								<tr class="products-list">
									<th>List of saved products:</th>
									<td>{{ form.product }}</td>
								</tr>
								<tr><td colspan="2">{{ form.state.errors }}</td></tr>
								<tr>
									<th>{{ form.state.label_tag }}</th>
									<td>{{ form.state }}</td>
								</tr>
								<tr><td colspan="2">{{ form.start_time.errors }}</td></tr>
								<tr>
									<th>{{ form.start_time.label_tag }}</th>
									<td>{{ form.start_time }}</td>
								</tr>
								<tr><td colspan="2">{{ form.duration.errors }}</td></tr>
								<tr>
									<th>{{ form.duration.label_tag }}</th>
									<td>{{ form.duration }}</td>
								</tr>
								<tr><td colspan="2">{{ form.start_time.errors }}</td></tr>
								<tr>
									<th>{{ form.start_time.label_tag }}</th>
									<td>{{ form.start_time }}</td>
								</tr>
								<tr><td colspan="2">{{ form.start_price.errors }}</td></tr>
								<tr>
									<th>{{ form.start_price.label_tag }}</th>
									<td>{{ form.start_price }}</td>
								</tr>
								<tr><td colspan="2">{{ form.payment_policy.errors }}</td></tr>
								<tr>
									<th>{{ form.payment_policy.label_tag }}</th>
									<td>{{ form.payment_policy }}</td>
								</tr>
								<tr><td colspan="2">{{ form.shipment_policy.errors }}</td></tr>
								<tr>
									<th>{{ form.shipment_policy.label_tag }}</th>
									<td>{{ form.shipment_policy }}</td>
								</tr>
								<tr><td colspan="2">{{ form.return_policy.errors }}</td></tr>
								<tr>
									<th>{{ form.return_policy.label_tag }}</th>
									<td>{{ form.return_policy }}</td>
								</tr>
							</table>
							<input class="btn btn-primary" type="submit" value="Create">
						</form>
					</div>					
				</div>
	
{% endblock %}
